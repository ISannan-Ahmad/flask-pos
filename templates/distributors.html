{% extends "base.html" %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h3>Distributors</h3>
  <a href="{{ url_for('distributors.add_distributor') }}" class="btn btn-success">
    <i class="bi bi-plus-circle"></i> Add Distributor
  </a>
</div>

<div class="row">
  {% for distributor in distributors %}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card h-100">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">{{ distributor.name }}</h5>
      </div>
      <div class="card-body">
        <p>
          <strong>Contact:</strong> {{ distributor.contact_person or 'N/A' }}
        </p>
        <p><strong>Phone:</strong> {{ distributor.phone or 'N/A' }}</p>
        <p><strong>Email:</strong> {{ distributor.email or 'N/A' }}</p>
        <p>
          <strong>Payment Terms:</strong> {{ distributor.payment_terms }} days
        </p>
        <p><strong>Products:</strong> {{ distributor.products|length }}</p>
        <p>
          <strong>Balance:</strong>
          <span
            class="{% if distributor.balance > 0 %}text-danger{% else %}text-success{% endif %}"
          >
            Rs. {{ "%.2f"|format(distributor.balance) }}
          </span>
        </p>
      </div>
      <div class="card-footer d-flex justify-content-between align-items-center">
        <a
          href="{{ url_for('distributors.distributor_detail', id=distributor.id) }}"
          class="btn btn-sm btn-primary"
        >
          View Details
        </a>
        <div class="btn-group">
            <a href="{{ url_for('distributors.edit_distributor', id=distributor.id) }}" class="btn btn-sm btn-outline-warning">Edit</a>
            <form action="{{ url_for('distributors.delete_distributor', id=distributor.id) }}" method="POST" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this distributor?');">
                <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
            </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% if not distributors %}
<div class="alert alert-info">No distributors added yet.</div>
{% endif %} {% endblock %}
